data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=Region)) + xlab("Happiness Score") + ylab("Logged GDP per Capita")
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`)) + xlab("Happiness Score") + ylab("Logged GDP per Capita")
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`)) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Bottom 20 Happiest Countries (2021)")
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`)) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)")
View(data_2020)
data_2020%>%
ggplot(aes(`Ladder score`,reorder(`Regional indicator`,`Ladder score`),fill=`Regional indicator`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none",axis.title.x = element_blank(),axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2020)")
data_2020%>%
ggplot(aes(`Ladder score`,reorder(`Regional indicator`,`Ladder score`),fill=`Regional indicator`)) +
geom_boxplot()  + theme(legend.position = "none",axis.title.x = element_blank(),axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2020)")
data_2020%>%
ggplot(aes(`Ladder score`,reorder(`Regional indicator`,`Ladder score`),fill=`Regional indicator`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none",axis.title.x = element_blank(),axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2020)")
data_2020%>%
ggplot(aes(`Ladder score`,reorder(`Regional indicator`,`Ladder score`),fill=`Regional indicator`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none", axis.title.x = element_blank(), axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2020)")
data_2021%>%
ggplot(aes(`Ladder score`,reorder(`Regional indicator`,`Ladder score`),fill=`Regional indicator`))+
geom_boxplot()+theme_classic()+ theme(legend.position = "none",axis.title.x = element_blank(),axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2021)")
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`)) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)")
data_2020 %>% arrange(desc(`Ladder score`)) %>%
head(20)%>%ggplot(aes(`Ladder score`,reorder(`Country name`,`Ladder score`),fill=`Regional indicator`))+
geom_col()+ geom_text(aes(label = `Ladder score`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Top 20 Happiest Countries (2020)") theme_classic() +
data_2020 %>% arrange(desc(`Ladder score`)) %>%
tail(20)%>%ggplot(aes(`Ladder score`,reorder(`Country name`,`Ladder score`),fill=`Regional indicator`))+
geom_col()+ geom_text(aes(label = `Ladder score`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Bottom 20 Happiest Countries (2020)")
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`)) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 2) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 5) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2020%>%
ggplot(aes(`Ladder score`,reorder(`Regional indicator`,`Ladder score`),fill=`Regional indicator`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none", axis.title.x = element_blank(), axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2020)")
data_2021%>%
ggplot(aes(`Ladder score`,reorder(`Regional indicator`,`Ladder score`),fill=`Regional indicator`))+
geom_boxplot()+theme_classic()+ theme(legend.position = "none",axis.title.x = element_blank(),axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2021)")
data_2020 %>% arrange(desc(`Ladder score`)) %>%
head(20)%>%ggplot(aes(`Ladder score`,reorder(`Country name`,`Ladder score`),fill=`Regional indicator`))+
geom_col()+ geom_text(aes(label = `Ladder score`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Top 20 Happiest Countries (2020)")
data_2020 %>% arrange(desc(`Ladder score`)) %>%
tail(20)%>%ggplot(aes(`Ladder score`,reorder(`Country name`,`Ladder score`),fill=`Regional indicator`))+
geom_col()+ geom_text(aes(label = `Ladder score`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Bottom 20 Happiest Countries (2020)")
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette="Dark2")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_fill_brewer(palette="Dark2")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette="Dark2")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Dark2")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Dark2")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette="Dark2")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Dark2")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Logged GDP per capita`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
#===================
data_2021 %>% arrange(desc(`Ladder score`)) %>%
head(20)%>%ggplot(aes(`Ladder score`,reorder(`Country name`,`Ladder score`),fill=`Regional indicator`))+
geom_col()+ geom_text(aes(label = `Ladder score`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Top 20 Happiest Countries (2021)")
data_2021 %>% arrange(desc(`Ladder score`)) %>%
tail(20)%>%ggplot(aes(`Ladder score`,reorder(`Country name`,`Ladder score`),fill=`Regional indicator`))+
geom_col()+ geom_text(aes(label = `Ladder score`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Bottom 20 Happiest Countries (2021)")
data_2020 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Social support`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of Social Support on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Ladder score`, `Freedom to make life choices`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Freedom to make life choices on Happiness (2020)") + theme_classic()
data_2021 %>% ggplot(aes(`Ladder score`, `Freedom to make life choices`)) + geom_point(aes(color=`Regional indicator`), size = 3) + xlab("Happiness Score") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Freedom to make life choices on Happiness (2021)") + theme_classic()
data_2020
data_2020 %>% select(`Country name`, `Ladder score`)
#==================
merge(data_2020 %>% select(`Country name`, `Ladder score`),data_2021 %>% select(`Country name`, `Ladder score`),by='Country name')
#==================
merge(Year2020 = data_2020 %>% select(`Country name`, `Ladder score`), Year2021 = data_2021 %>% select(`Country name`, `Ladder score`),by='Country name')
#==================
merge(data_2020 %>% select(`Country name`, `Ladder score`),data_2021 %>% select(`Country name`, `Ladder score`),by='Country name')
View(data_2020)
View(data_2021)
# Merge Datasets (2020 & 2021)
merge(data_2020 ,data_2021 ,by='Country name')
# Merge Datasets (2020 & 2021)
data <- merge(data_2020 ,data_2021 ,by='Country name')
View(data)
data
# Merge Datasets (2020 & 2021)
data <- merge(data_2020 ,data_2021 ,by='Country name')
View(data)
View(data_2020)
View(data_2021)
data
View(data)
within(data, rm(`Regional indicator.y`))
View(data)
data <- within(data, rm(`Regional indicator.y`))
View(data)
View(data)
View(data_2020)
sum(1.28518951
1.4995259
0.9612714
0.6623167
0.15967044
0.4778572619)
sum(1.28518951,
1.4995259,
0.9612714,
0.6623167,
0.15967044,
0.4778572619)
sum(1.972317,
1.28518951,
1.4995259,
0.9612714,
0.6623167,
0.15967044,
0.4778572619,
2.7628350)
sum(1.28518951,
1.4995259,
0.9612714,
0.6623167,
0.15967044,
0.4778572619,
2.7628350)
# Merge Datasets (2020 & 2021)
data <- merge(data_2020 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`) ,
data_2021 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`)
,by='Country name')
View(data)
data <- within(data, rm(`Regional indicator.y`))
names(data) <- c('Country',
'Region',
'Happiness Score - 2020',
'Logged GDP per capita - 2020',
'Social Support - 2020',
'Healthy Life Expectancy - 2020',
'Freedom to make life choices - 2020',
'Generocity - 2020',
'Perceptions of Corruption - 2020',
'Happiness Score - 2021',
'Logged GDP per capita - 2021',
'Social Support - 2021',
'Healthy Life Expectancy - 2021',
'Freedom to make life choices - 2021',
'Generocity - 2021',
'Perceptions of Corruption - 2021'
)
#### Preamble ####
# Purpose: Prepare the World Happiness Report data from 2020-2022
# Author: Isfandyar Virani
# Data: 25 April 2022
# Contact: isfandyar.virani@mail.utoronto.ca
# License: MIT
#### Workspace setup ####
library(haven)
library(tidyverse)
library(readxl)
library(stringr)
# Read in the raw data.
data_2022 <- read_excel("inputs/data/Appendix_2_Data_for_Figure_2.1_2022.xls")
data_2021 <- read_excel("inputs/data/Appendix_2_Data_for_Figure_2.1_2021.xls")
# Merge Datasets (2020 & 2021)
data <- merge(data_2020 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`) ,
data_2021 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`)
,by='Country name')
data <- within(data, rm(`Regional indicator.y`))
names(data) <- c('Country',
'Region',
'Happiness Score - 2020',
'Logged GDP per capita - 2020',
'Social Support - 2020',
'Healthy Life Expectancy - 2020',
'Freedom to make life choices - 2020',
'Generocity - 2020',
'Perceptions of Corruption - 2020',
'Happiness Score - 2021',
'Logged GDP per capita - 2021',
'Social Support - 2021',
'Healthy Life Expectancy - 2021',
'Freedom to make life choices - 2021',
'Generocity - 2021',
'Perceptions of Corruption - 2021'
)
View(data)
#### Workspace setup ####
library(haven)
library(tidyverse)
library(readxl)
library(stringr)
# Read in the raw data.
data_2022 <- read_excel("inputs/data/Appendix_2_Data_for_Figure_2.1_2022.xls")
data_2021 <- read_excel("inputs/data/Appendix_2_Data_for_Figure_2.1_2021.xls")
# Merge Datasets (2020 & 2021)
data <- merge(data_2020 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`) ,
data_2021 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`)
,by='Country name')
data <- within(data, rm(`Regional indicator.y`))
# Merge Datasets (2020 & 2021)
data <- merge(data_2020 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`) ,
data_2021 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`)
,by='Country name')
View(data_2021)
data_2021 <- read_excel("inputs/data/Appendix_2_Data_for_Figure_2.1_2021.xls")
data_2020 <- read_excel("inputs/data/WHR20_DataForFigure2.1_2020.xls")
# Merge Datasets (2020 & 2021)
data <- merge(data_2020 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`) ,
data_2021 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`)
,by='Country name')
data <- within(data, rm(`Regional indicator.y`))
names(data) <- c('Country',
'Region',
'Happiness Score - 2020',
'Logged GDP per capita - 2020',
'Social Support - 2020',
'Healthy Life Expectancy - 2020',
'Freedom to make life choices - 2020',
'Generocity - 2020',
'Perceptions of Corruption - 2020',
'Happiness Score - 2021',
'Logged GDP per capita - 2021',
'Social Support - 2021',
'Healthy Life Expectancy - 2021',
'Freedom to make life choices - 2021',
'Generocity - 2021',
'Perceptions of Corruption - 2021'
)
View(data)
#Save data in a new file
write_csv(raw_data, "outputs/data/dataset.csv")
#Save data in a new file
write_csv(data, "outputs/data/dataset.csv")
data <- read_excel("outputs/data/dataset.csv")
data <- read_excel("outputs/data/dataset.csv")
#### Preamble ####
# Purpose: Prepare the World Happiness Report data from 2020-2021
# Author: Isfandyar Virani
# Data: 25 April 2022
# Contact: isfandyar.virani@mail.utoronto.ca
# License: MIT
#### Workspace setup ####
library(haven)
library(tidyverse)
library(readxl)
library(stringr)
# Read in the raw data.
data_2021 <- read_excel("inputs/data/Appendix_2_Data_for_Figure_2.1_2021.xls")
data_2020 <- read_excel("inputs/data/WHR20_DataForFigure2.1_2020.xls")
# Merge Datasets (2020 & 2021)
data <- merge(data_2020 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`) ,
data_2021 %>% select(`Country name`, `Regional indicator`,
`Ladder score`, `Logged GDP per capita`,
`Social support`, `Healthy life expectancy`,
`Freedom to make life choices`,
Generosity, `Perceptions of corruption`)
,by='Country name')
#Remove duplicate Region
data <- within(data, rm(`Regional indicator.y`))
#Rename columns
names(data) <- c('Country',
'Region',
'Happiness Score - 2020',
'Logged GDP per capita - 2020',
'Social Support - 2020',
'Healthy Life Expectancy - 2020',
'Freedom to make life choices - 2020',
'Generocity - 2020',
'Perceptions of Corruption - 2020',
'Happiness Score - 2021',
'Logged GDP per capita - 2021',
'Social Support - 2021',
'Healthy Life Expectancy - 2021',
'Freedom to make life choices - 2021',
'Generocity - 2021',
'Perceptions of Corruption - 2021'
)
#Save data in a new file
write_csv(data, "outputs/data/dataset.csv")
data <- read_excel("outputs/data/dataset.csv")
data <- read.csv("outputs/data/dataset.csv")
data <- read.csv("outputs/data/dataset.csv")
View(data)
data%>%
ggplot(aes(`Happiness Score - 2020`,reorder(`Region`,`Happiness Score - 2020`),fill=`Region`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none", axis.title.x = element_blank(), axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2020)")
data%>%
ggplot(aes(`Happiness.Score...2020 - 2020`,reorder(`Region`,`Happiness.Score...2020`),fill=`Region`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none", axis.title.x = element_blank(), axis.title.y = element_blank())+
ggtitle("Happiness.Score...2020 by Regions (2020)")
data%>%
ggplot(aes(`Happiness.Score...2020`,reorder(`Region`,`Happiness.Score...2020`),fill=`Region`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none", axis.title.x = element_blank(), axis.title.y = element_blank())+
ggtitle("Happiness.Score...2020 by Regions (2020)")
data%>%
ggplot(aes(`Happiness.Score...2021`,reorder(`Region`,`Happiness.Score...2021`),fill=`Region`))+
geom_boxplot()+theme_classic()+ theme(legend.position = "none",axis.title.x = element_blank(),axis.title.y = element_blank())+
ggtitle("Happiness.Score...2020 by Regions (2021)")
data%>%
ggplot(aes(`Happiness.Score...2020`,reorder(`Region`,`Happiness.Score...2020`),fill=`Region`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none", axis.title.x = element_blank(), axis.title.y = element_blank())+
ggtitle("Happiness.Score...2020 by Regions (2020)")
data%>%
ggplot(aes(`Happiness.Score...2021`,reorder(`Region`,`Happiness.Score...2021`),fill=`Region`))+
geom_boxplot()+theme_classic()+ theme(legend.position = "none",axis.title.x = element_blank(),axis.title.y = element_blank())+
ggtitle("Happiness.Score...2020 by Regions (2021)")
data%>% arrange(desc(`Happiness.Score...2020`)) %>%
head(20)%>%ggplot(aes(`Happiness.Score...2020`,reorder(Country,`Happiness.Score...2020`),fill=`Region`))+
geom_col()+ geom_text(aes(label = `Happiness.Score...2020`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral") + ggtitle("Top 20 Happiest Countries (2020)")
data %>% arrange(desc(`Happiness.Score...2020`)) %>%
tail(20)%>%ggplot(aes(`Happiness.Score...2020`,reorder(`Country`,`Happiness.Score...2020`),fill=`Region`))+
geom_col()+ geom_text(aes(label = `Happiness.Score...2020`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral") + ggtitle("Bottom 20 Happiest Countries (2020)")
#===================
data %>% arrange(desc(`Happiness.Score...2021`)) %>%
head(20)%>%ggplot(aes(`Happiness.Score...2021`,reorder(`Country`,`Happiness.Score...2021`),fill=`Region`))+
geom_col()+ geom_text(aes(label = `Happiness.Score...2021`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Top 20 Happiest Countries (2021)")
data %>% arrange(desc(`Happiness.Score...2021`)) %>%
tail(20)%>%ggplot(aes(`Happiness.Score...2021`,reorder(`Country`,`Happiness.Score...2021`),fill=`Region`))+
geom_col()+ geom_text(aes(label = `Happiness.Score...2021`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Bottom 20 Happiest Countries (2021)")
data %>% ggplot(aes(`Happiness.Score...2020`, `Logged GDP per capita`)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness.Score...2020") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2020`, Logged.GDP.per.capita...2020)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness.Score...2020") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2021`, Logged.GDP.per.capita...2021)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness.Score...2020") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2020`, Logged.GDP.per.capita...2020)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness.Score...2020") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2021`, Logged.GDP.per.capita...2021)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness.Score...2020") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of GDP per Capita on Happiness (2021)") + theme_classic()
data_2020 %>% ggplot(aes(`Happiness.Score...2020`, Social.support...2020)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness.Score...2020") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Social Support on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2020`, Social.support...2020)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness.Score...2020") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Social Support on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2020`, Social.Support...2020)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness.Score...2020") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Social Support on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2021`, Social.Support...2021)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness.Score...2020") + ylab("Logged GDP per Capita") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of Social Support on Happiness (2021)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2020`, Social.Support...2020)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness Score") + ylab("Social Support") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Social Support on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2021`, Social.Support...2021)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness Score") + ylab("Social Support") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of Social Support on Happiness (2021)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2020`, Freedom.to.make.life.choices...2020)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness Score") + ylab("Freedom") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Freedom to make life choices on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2021`, Freedom.to.make.life.choices...2021)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness Score") + ylab("Freedom") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Freedom to make life choices on Happiness (2021)") + theme_classic()
data%>%
ggplot(aes(`Happiness.Score...2020`,reorder(`Region`,`Happiness.Score...2020`),fill=`Region`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none", axis.title.x = element_blank(), axis.title.y = element_blank())+
ggtitle("Happiness.Score...2020 by Regions (2020)")
data%>%
ggplot(aes(`Happiness.Score...2021`,reorder(`Region`,`Happiness.Score...2021`),fill=`Region`))+
geom_boxplot()+theme_classic()+ theme(legend.position = "none",axis.title.x = element_blank(),axis.title.y = element_blank())+
ggtitle("Happiness.Score...2020 by Regions (2021)")
data%>%
ggplot(aes(`Happiness.Score...2020`,reorder(`Region`,`Happiness.Score...2020`),fill=`Region`)) +
geom_boxplot() + theme_classic() + theme(legend.position = "none", axis.title.x = element_blank(), axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2020)")
data%>%
ggplot(aes(`Happiness.Score...2021`,reorder(`Region`,`Happiness.Score...2021`),fill=`Region`))+
geom_boxplot()+theme_classic()+ theme(legend.position = "none",axis.title.x = element_blank(),axis.title.y = element_blank())+
ggtitle("Happiness Score by Regions (2021)")
data%>% arrange(desc(`Happiness.Score...2020`)) %>%
head(20)%>%ggplot(aes(`Happiness.Score...2020`,reorder(Country,`Happiness.Score...2020`),fill=`Region`))+
geom_col()+ geom_text(aes(label = `Happiness.Score...2020`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral") + ggtitle("Top 20 Happiest Countries (2020)")
#======== Top 20 & bottom 20 happiest countries in 2021 =========
data %>% arrange(desc(`Happiness.Score...2021`)) %>%
head(20)%>%ggplot(aes(`Happiness.Score...2021`,reorder(`Country`,`Happiness.Score...2021`),fill=`Region`))+
geom_col()+ geom_text(aes(label = `Happiness.Score...2021`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Top 20 Happiest Countries (2021)")
data %>% arrange(desc(`Happiness.Score...2021`)) %>%
tail(20)%>%ggplot(aes(`Happiness.Score...2021`,reorder(`Country`,`Happiness.Score...2021`),fill=`Region`))+
geom_col()+ geom_text(aes(label = `Happiness.Score...2021`), position=position_stack(vjust=0.5),color="black",size=3)+
theme_classic()+theme(axis.title.x = element_blank(),axis.title.y = element_blank())+
scale_fill_brewer(palette = "Spectral")+ggtitle("Bottom 20 Happiest Countries (2021)")
data %>% ggplot(aes(`Happiness.Score...2020`, Social.Support...2020)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness Score") + ylab("Social Support") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Social Support on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2021`, Social.Support...2021)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness Score") + ylab("Social Support") +
scale_color_brewer(palette = "Spectral")+ggtitle("Effect of Social Support on Happiness (2021)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2020`, Freedom.to.make.life.choices...2020)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness Score") + ylab("Freedom") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Freedom to make life choices on Happiness (2020)") + theme_classic()
data %>% ggplot(aes(`Happiness.Score...2021`, Freedom.to.make.life.choices...2021)) + geom_point(aes(color=`Region`), size = 3) + xlab("Happiness Score") + ylab("Freedom") +
scale_color_brewer(palette="Spectral")+ggtitle("Effect of Freedom to make life choices on Happiness (2021)") + theme_classic()
data%>% arrange(desc(`Happiness.Score...2020`)) %>%
head(20)%>%ggplot(aes(`Happiness.Score...2020`,reorder(Country,`Happiness.Score...2020`),fill=`Region`)) +
geom_col() + geom_text(aes(label = `Happiness.Score...2020`), position=position_stack(vjust=0.5),color="black",size=3) +
theme_classic() + theme(axis.title.x = element_blank(),axis.title.y = element_blank()) +
scale_fill_brewer(palette = "Spectral") + ggtitle("Top 20 Happiest Countries (2020)")
data %>% arrange(desc(`Happiness.Score...2020`)) %>%
tail(20) %>% ggplot(aes(`Happiness.Score...2020`,reorder(`Country`,`Happiness.Score...2020`),fill=`Region`)) +
geom_col() + geom_text(aes(label = `Happiness.Score...2020`), position=position_stack(vjust=0.5),color="black",size=3) +
theme_classic() + theme(axis.title.x = element_blank(),axis.title.y = element_blank()) +
scale_fill_brewer(palette = "Spectral") + ggtitle("Bottom 20 Happiest Countries (2020)")
